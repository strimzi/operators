<!DOCTYPE import-control PUBLIC
        "-//Checkstyle//DTD ImportControl Configuration 1.4//EN"
        "https://checkstyle.org/dtds/import_control_1_4.dtd">

<!-- We do not have rules for all classes. So we have to first allow all classes import everything
(strategyOnMismatch="allowed") and then we specify rules for selected packages where we disallow imports by default in
the subpackage sections.

We also control imports only in production classes and not in tests. This is controlled in the main checkstyle file.
-->
<import-control pkg="io.strimzi" strategyOnMismatch="allowed">
    <subpackage name="operator.common.model" strategyOnMismatch="disallowed">
        <!-- This enforces the layering between the Strimzi Model and Operator classes in the Operator Common. The Model classes are not allowed
        to import from Operator classes. They should only use the API classes -->

        <!-- Common libraries and Java classes -->
        <allow pkg="java" />
        <allow pkg="com.fasterxml.jackson" />
        <allow pkg="io.fabric8.zjsonpatch" />
        <allow pkg="io.fabric8.kubernetes.api.model" />
        <allow class="io.fabric8.kubernetes.client.utils.Serialization" />
        <allow class="io.fabric8.kubernetes.client.CustomResource" />

        <!-- Strimzi Operators classes -->
        <allow pkg="io.strimzi.api.annotations" />
        <allow pkg="io.strimzi.api.kafka" />
        <allow pkg="io.strimzi.certs" />
        <allow pkg="io.strimzi.operator.common.model" />
        <allow class="io.strimzi.operator.common.Reconciliation" />
        <allow class="io.strimzi.operator.common.ReconciliationLogger" />
        <allow class="io.strimzi.operator.common.Util" />
        <allow class="io.strimzi.operator.common.Annotations" />
    </subpackage>

    <subpackage name="operator.cluster.model" strategyOnMismatch="disallowed">
        <!-- This enforces the layering between the Strimzi Model and Operator classes in the Cluster Operator. The Model classes are not allowed
        to import from Operator classes. They should only use the API classes -->

        <!-- Common libraries and Java classes -->
        <allow pkg="java" />
        <allow pkg="org.apache.kafka" />
        <allow pkg="org.apache.logging.log4j" />
        <allow pkg="com.fasterxml.jackson" />
        <allow pkg="io.fabric8.zjsonpatch" />
        <allow pkg="io.fabric8.openshift.api.model" />
        <allow pkg="io.fabric8.kubernetes.api.model" />
        <allow pkg="io.vertx.core.json" />
        <allow class="edu.umd.cs.findbugs.annotations.SuppressFBWarnings" />

        <!-- Strimzi Operators classes -->
        <allow pkg="io.strimzi.api.kafka" />
        <allow pkg="io.strimzi.plugin.security.profiles" />
        <allow pkg="io.strimzi.platform" />
        <allow pkg="io.strimzi.certs" />
        <allow pkg="io.strimzi.kafka.config.model" />
        <allow pkg="io.strimzi.operator.common.model" />
        <allow pkg="io.strimzi.operator.cluster.model" />
        <allow class="io.strimzi.operator.common.Reconciliation" />
        <allow class="io.strimzi.operator.common.ReconciliationLogger" />
        <allow class="io.strimzi.operator.common.Util" />
        <allow class="io.strimzi.operator.common.InvalidConfigurationException" />
        <allow class="io.strimzi.operator.common.Annotations" />
        <allow class="io.strimzi.operator.cluster.ClusterOperatorConfig" />
        <allow class="io.strimzi.operator.cluster.PlatformFeaturesAvailability" />

        <!-- Other Strimzi projects -->
        <allow pkg="io.strimzi.kafka.oauth" />
    </subpackage>

    <subpackage name="operator.user.model" strategyOnMismatch="disallowed">
    <!-- This enforces the layering between the Strimzi Model and Operator classes in the User Operator. The Model classes are not allowed
    to import from Operator classes. They should only use the API classes -->

        <!-- Common libraries and Java classes -->
        <allow pkg="java" />
        <allow pkg="javax.naming" />
        <allow pkg="org.apache.kafka.common" />
        <allow pkg="io.fabric8.kubernetes.api.model" />

        <!-- Strimzi Operators classes -->
        <allow pkg="io.strimzi.api.kafka" />
        <allow pkg="io.strimzi.certs" />
        <allow pkg="io.strimzi.operator.common.model" />
        <allow pkg="io.strimzi.operator.user.model" />
        <allow class="io.strimzi.operator.common.Reconciliation" />
        <allow class="io.strimzi.operator.common.ReconciliationLogger" />
        <allow class="io.strimzi.operator.common.Util" />
    </subpackage>
</import-control>